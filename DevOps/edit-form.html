<script>
    var STATIC_PATH = _spPageContextInfo.webServerRelativeUrl + "/SiteAssets/app/DevOps";
    var scripts = [
        "modules/jquery-3.3.1.min.js",
        "modules/angular.min.js",
        "modules/angular/angular-sanitize.min.js",
        // "modules/angular/textAngular.min.js",
        "modules/bootstrap/js/bootstrap.min.js",
        "modules/bootstrap/js/ui-bootstrap-tpls-2.5.0.min.js",
        "modules/angular/angular-validation.min.js",
        "modules/angular/angular-validation-rule.min.js",
        
        "modules/ui-select/select.js",
        // "modules/angular/angular-toggle-switch.min.js",
        "modules/textAngular/textAngular-rangy.min.js",
        "modules/textAngular/textAngular-sanitize.min.js",
        "modules/textAngular/textAngular.min.js",

        "app.js",
        "services/api-service.js",
        "components/nav-bar/navBar-app.js",
        "components/form/form-component.js",
    ];
    var styles = [
        "modules/bootstrap/css/bootstrap.css",
        "/modules/font-awesome/css/font-awesome.min.css",
        "modules/ui-select/select.css",
        "style.css",
        "components/nav-bar/navBar-style.css",
        "components/form/form-style.css",
    ];
    for(var i=0;i<scripts.length;i++){
        document.write('<script language="javascript" type="text/javascript" src="'+ STATIC_PATH + "/" + scripts[i] + "?rnd" + Math.random() +'"><\/script>')
    }
    for(var i=0;i<styles.length;i++){
        document.write('<link href="'+ STATIC_PATH + "/" + styles[i] + "?rnd" + Math.random() +'" rel="stylesheet">')
    }
</script>
<style>
.ms-core-webpartadder{z-index:9;}
</style>
<script>
    (function(){
        $(document).ready(function(){
            createEditIcon()
        });

        function hideIdColumn(){
            $("table[summary='TSProjects'] tr>th:nth-child(2)").hide();
            $("table[summary='TSProjects'] tr>td:nth-child(2)").hide();
        }

        function createEditIcon(){
            var items = $("table[summary='TSProjects'] tbody>tr");
            $.each(items, function(key, row){
                $(row).find('.ms-list-itemLink-td').html('<a class="edit-item" '+
                'data-toggle="modal" data-target="#new-track-form" style="cursor: pointer;height: 25px;vertical-align:sub;display: inline-block;">'+
                '<i class="fa fa-pencil" aria-hidden="true"></i></a>');
                $(row).find('.ms-list-itemLink-td').css({'text-align': 'center'});
                $(row).find('.ms-list-itemLink-td .edit-item').on('click',function(){
                    var formId = $(row).find("td:nth-child(2)").text();
                    window.history.pushState(null,null,'?ItemId='+formId);
                    //location.reload();
                });
            });
            hideIdColumn();
        }

    })();
</script>

<div class="app-container b" ng-app="App" ng-controller="AppCtrl as ctrl">
    <div class="container" id="jump-page">
        <div>
            <nav-bar></nav-bar>
			<div ng-if="ctrl.showModal">
				<track-form></track-form>
			</div>
        </div>
    </div>
</div>